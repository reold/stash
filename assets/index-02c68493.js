var Yt=Object.defineProperty;var Gt=(e,t,n)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ae=(e,t,n)=>(Gt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function x(){}const Te=e=>e;function Oe(e,t){for(const n in t)e[n]=t[n];return e}function Pt(e){return e()}function lt(){return Object.create(null)}function ee(e){e.forEach(Pt)}function ge(e){return typeof e=="function"}function He(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Ee;function Ue(e,t){return Ee||(Ee=document.createElement("a")),Ee.href=t,e===Ee.href}function Rt(e){return Object.keys(e).length===0}function We(e,...t){if(e==null)return x;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Xt(e){let t;return We(e,n=>t=n)(),t}function ye(e,t,n){e.$$.on_destroy.push(We(t,n))}function Z(e,t,n){return e.set(n),t}function Ut(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Dt=typeof window<"u";let Je=Dt?()=>window.performance.now():()=>Date.now(),Ve=Dt?e=>requestAnimationFrame(e):x;const fe=new Set;function Et(e){fe.forEach(t=>{t.c(e)||(fe.delete(t),t.f())}),fe.size!==0&&Ve(Et)}function Ze(e){let t;return fe.size===0&&Ve(Et),{promise:new Promise(n=>{fe.add(t={c:e,f:n})}),abort(){fe.delete(t)}}}function h(e,t){e.appendChild(t)}function Qt(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Wt(e){const t=w("style");return Jt(Qt(e),t),t.sheet}function Jt(e,t){return h(e.head||e,t),t.sheet}function P(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function he(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function Y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function L(e){return document.createTextNode(e)}function z(){return L(" ")}function Mt(){return L("")}function X(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Vt(e){return function(t){t.target===this&&e.call(this,t)}}function f(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Zt(e){return e===""?null:+e}function Kt(e){return Array.from(e.childNodes)}function G(e,t){t=""+t,e.data!==t&&(e.data=t)}function Fe(e,t){e.value=t??""}function W(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function $t(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,r,t),l}function ot(e,t){return new e(t)}const Le=new Map;let ze=0;function en(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function tn(e,t){const n={stylesheet:Wt(t),rules:{}};return Le.set(e,n),n}function Ft(e,t,n,r,l,o,i,s=0){const a=16.666/r;let u=`{
`;for(let _=0;_<=1;_+=a){const B=t+(n-t)*o(_);u+=_*100+`%{${i(B,1-B)}}
`}const d=u+`100% {${i(n,1-n)}}
}`,c=`__svelte_${en(d)}_${s}`,g=Qt(e),{stylesheet:m,rules:b}=Le.get(g)||tn(g,e);b[c]||(b[c]=!0,m.insertRule(`@keyframes ${c} ${d}`,m.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${c} ${r}ms linear ${l}ms 1 both`,ze+=1,c}function Ye(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),l=n.length-r.length;l&&(e.style.animation=r.join(", "),ze-=l,ze||nn())}function nn(){Ve(()=>{ze||(Le.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)}),Le.clear())})}let ke;function we(e){ke=e}function rn(){if(!ke)throw new Error("Function called outside component initialization");return ke}function Lt(e){rn().$$.on_mount.push(e)}const ue=[],Ge=[];let de=[];const it=[],ln=Promise.resolve();let Re=!1;function on(){Re||(Re=!0,ln.then(zt))}function me(e){de.push(e)}const Ne=new Set;let ae=0;function zt(){if(ae!==0)return;const e=ke;do{try{for(;ae<ue.length;){const t=ue[ae];ae++,we(t),sn(t.$$)}}catch(t){throw ue.length=0,ae=0,t}for(we(null),ue.length=0,ae=0;Ge.length;)Ge.pop()();for(let t=0;t<de.length;t+=1){const n=de[t];Ne.has(n)||(Ne.add(n),n())}de.length=0}while(ue.length);for(;it.length;)it.pop()();Re=!1,Ne.clear(),we(e)}function sn(e){if(e.fragment!==null){e.update(),ee(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(me)}}function an(e){const t=[],n=[];de.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),de=t}let be;function xt(){return be||(be=Promise.resolve(),be.then(()=>{be=null})),be}function xe(e,t,n){e.dispatchEvent($t(`${t?"intro":"outro"}${n}`))}const Me=new Set;let ne;function re(){ne={r:0,c:[],p:ne}}function le(){ne.r||ee(ne.c),ne=ne.p}function S(e,t){e&&e.i&&(Me.delete(e),e.i(t))}function q(e,t,n,r){if(e&&e.o){if(Me.has(e))return;Me.add(e),ne.c.push(()=>{Me.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const It={duration:0};function cn(e,t,n){const r={direction:"in"};let l=t(e,n,r),o=!1,i,s,a=0;function u(){i&&Ye(e,i)}function d(){const{delay:g=0,duration:m=300,easing:b=Te,tick:v=x,css:_}=l||It;_&&(i=Ft(e,0,1,m,g,b,_,a++)),v(0,1);const B=Je()+g,k=B+m;s&&s.abort(),o=!0,me(()=>xe(e,!0,"start")),s=Ze(Q=>{if(o){if(Q>=k)return v(1,0),xe(e,!0,"end"),u(),o=!1;if(Q>=B){const I=b((Q-B)/m);v(I,1-I)}}return o})}let c=!1;return{start(){c||(c=!0,Ye(e),ge(l)?(l=l(r),xt().then(d)):d())},invalidate(){c=!1},end(){o&&(u(),o=!1)}}}function Tt(e,t,n){const r={direction:"out"};let l=t(e,n,r),o=!0,i;const s=ne;s.r+=1;function a(){const{delay:u=0,duration:d=300,easing:c=Te,tick:g=x,css:m}=l||It;m&&(i=Ft(e,1,0,d,u,c,m));const b=Je()+u,v=b+d;me(()=>xe(e,!1,"start")),Ze(_=>{if(o){if(_>=v)return g(0,1),xe(e,!1,"end"),--s.r||ee(s.c),!1;if(_>=b){const B=c((_-b)/d);g(1-B,B)}}return o})}return ge(l)?xt().then(()=>{l=l(r),a()}):a(),{end(u){u&&l.tick&&l.tick(1,0),o&&(i&&Ye(e,i),o=!1)}}}function un(e,t){const n={},r={},l={$$scope:1};let o=e.length;for(;o--;){const i=e[o],s=t[o];if(s){for(const a in i)a in s||(r[a]=1);for(const a in s)l[a]||(n[a]=s[a],l[a]=1);e[o]=s}else for(const a in i)l[a]=1}for(const i in r)i in n||(n[i]=void 0);return n}function fn(e){return typeof e=="object"&&e!==null?e:{}}function Ie(e){e&&e.c()}function Be(e,t,n,r){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),r||me(()=>{const i=e.$$.on_mount.map(Pt).filter(ge);e.$$.on_destroy?e.$$.on_destroy.push(...i):ee(i),e.$$.on_mount=[]}),o.forEach(me)}function Ce(e,t){const n=e.$$;n.fragment!==null&&(an(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function dn(e,t){e.$$.dirty[0]===-1&&(ue.push(e),on(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ke(e,t,n,r,l,o,i,s=[-1]){const a=ke;we(e);const u=e.$$={fragment:null,ctx:[],props:o,update:x,not_equal:l,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:lt(),dirty:s,skip_bound:!1,root:t.target||a.$$.root};i&&i(u.root);let d=!1;if(u.ctx=n?n(e,t.props||{},(c,g,...m)=>{const b=m.length?m[0]:g;return u.ctx&&l(u.ctx[c],u.ctx[c]=b)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](b),d&&dn(e,c)),g}):[],u.update(),d=!0,ee(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const c=Kt(t.target);u.fragment&&u.fragment.l(c),c.forEach(j)}else u.fragment&&u.fragment.c();t.intro&&S(e.$$.fragment),Be(e,t.target,t.anchor,t.customElement),zt()}we(a)}class $e{$destroy(){Ce(this,1),this.$destroy=x}$on(t,n){if(!ge(n))return x;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(t){this.$$set&&!Rt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ce=[];function mn(e,t){return{subscribe:pe(e,t).subscribe}}function pe(e,t=x){let n;const r=new Set;function l(s){if(He(e,s)&&(e=s,n)){const a=!ce.length;for(const u of r)u[1](),ce.push(u,e);if(a){for(let u=0;u<ce.length;u+=2)ce[u][0](ce[u+1]);ce.length=0}}}function o(s){l(s(e))}function i(s,a=x){const u=[s,a];return r.add(u),r.size===1&&(n=t(l)||x),s(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:i}}function pn(e,t,n){const r=!Array.isArray(e),l=r?[e]:e,o=t.length<2;return mn(n,i=>{let s=!1;const a=[];let u=0,d=x;const c=()=>{if(u)return;d();const m=t(r?a[0]:a,i);o?i(m):d=ge(m)?m:x},g=l.map((m,b)=>We(m,v=>{a[b]=v,u&=~(1<<b),s&&c()},()=>{u|=1<<b}));return s=!0,c(),function(){ee(g),d(),s=!1}})}const ve=pe({name:"home",props:{}}),Ht=pe([]);function et(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function st(e){return Object.prototype.toString.call(e)==="[object Date]"}function Xe(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((l,o)=>Xe(e[o],l));return l=>r.map(o=>o(l))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(st(e)&&st(t)){e=e.getTime(),t=t.getTime();const o=t-e;return i=>new Date(e+i*o)}const r=Object.keys(t),l={};return r.forEach(o=>{l[o]=Xe(e[o],t[o])}),o=>{const i={};return r.forEach(s=>{i[s]=l[s](o)}),i}}if(n==="number"){const r=t-e;return l=>e+l*r}throw new Error(`Cannot interpolate ${n} values`)}function St(e,t={}){const n=pe(e);let r,l=e;function o(i,s){if(e==null)return n.set(e=i),Promise.resolve();l=i;let a=r,u=!1,{delay:d=0,duration:c=400,easing:g=Te,interpolate:m=Xe}=Oe(Oe({},t),s);if(c===0)return a&&(a.abort(),a=null),n.set(e=l),Promise.resolve();const b=Je()+d;let v;return r=Ze(_=>{if(_<b)return!0;u||(v=m(e,i),typeof c=="function"&&(c=c(e,i)),u=!0),a&&(a.abort(),a=null);const B=_-b;return B>c?(n.set(e=i),!1):(n.set(e=v(g(B/c))),!0)}),r.promise}return{set:o,update:(i,s)=>o(i(l,e),s),subscribe:n.subscribe}}const gn="https://backend-1-d2336410.deta.app",Qe=gn+"/api",$={create:async(e,t={})=>{let n=JSON.stringify({creator:e,config:t});console.log("body",n);let r=await fetch(`${Qe}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:n});if(r.status!=200)throw new Error(await r.text());return await r.json()},join:async(e,t)=>{let n=await fetch(`${Qe}/join/${t}?username=${e}`,{});if(n.status!=200)throw new Error(await n.text())},state:async(e,t,n="")=>{let r=await fetch(`${Qe}/${e}/state?depth=${t}&username=${n}`);if(r.status!=200)throw new Error(await r.text());return await r.json()},action:async(e,t,n,r=0)=>{let l=JSON.stringify({username:t,type:n,card:r}),o=await fetch(`${Qe}/${e}/action`,{method:"POST",headers:{"Content-Type":"application/json"},body:l});if(o.status!=200)throw new Error(await o.text());if(n==1||n==2)return await o.json()}};function at(e,{delay:t=0,duration:n=400,easing:r=et,amount:l=5,opacity:o=0}={}){const i=getComputedStyle(e),s=+i.opacity,a=i.filter==="none"?"":i.filter,u=s*(1-o),[d,c]=Ut(l);return{delay:t,duration:n,easing:r,css:(g,m)=>`opacity: ${s-u*m}; filter: ${a} blur(${m*d}${c});`}}function hn(e,{delay:t=0,duration:n=400,easing:r=Te}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:o=>`opacity: ${o*l}`}}const qe={parseColor:e=>{const t=(e&48)>>4;return t==0?"red":t==1?"green":t==2?"blue":t==3?"yellow":"pink-500"},parseType:e=>{const t=(e&192)>>6;return t==0?"number":t==1?"plus2":t==2?"plus4":t==3?"reverse":void 0},parseNumber:e=>e&15};function _n(e){let t,n,r,l,o,i,s,a=e[8].display+"",u,d,c,g=e[8].display+"",m,b,v,_=e[8].display+"",B,k,Q,I,p,C,A,T;return{c(){t=w("button"),n=Y("svg"),r=Y("rect"),o=Y("ellipse"),i=Y("text"),s=Y("tspan"),u=L(a),d=Y("text"),c=Y("tspan"),m=L(g),b=Y("text"),v=Y("tspan"),B=L(_),f(r,"x","0"),f(r,"width","100"),f(r,"height","150"),f(r,"rx","10"),f(r,"fill",l="--var("+e[8].color+")"),f(o,"cx","50"),f(o,"cy","75"),f(o,"rx","55"),f(o,"ry","40"),f(o,"transform","rotate(-45 50 73)"),f(o,"stroke","white"),f(o,"stroke-width","5"),f(s,"text-anchor","middle"),f(s,"x","50"),f(s,"y","85"),f(i,"fill","white"),f(i,"xml:space","preserve"),W(i,"white-space","pre"),f(i,"font-family","Poppins"),f(i,"font-size","36"),f(i,"font-weight","900"),f(i,"letter-spacing","0em"),f(c,"text-anchor","start"),f(c,"x","5"),f(c,"y","20"),f(d,"fill","white"),f(d,"xml:space","preserve"),W(d,"white-space","pre"),f(d,"font-family","Poppins"),f(d,"font-size","20"),f(d,"font-weight","900"),f(d,"letter-spacing","0em"),f(v,"text-anchor","end"),f(v,"x","95"),f(v,"y","140"),f(b,"fill","white"),f(b,"xml:space","preserve"),W(b,"white-space","pre"),f(b,"font-family","Poppins"),f(b,"font-size","20"),f(b,"font-weight","900"),f(b,"letter-spacing","0em"),f(n,"class","h-max w-max"),f(n,"viewBox","0 0 101 147"),f(n,"fill","none"),f(n,"xmlns","http://www.w3.org/2000/svg"),f(t,"id",k=e[0]?e[0]:`${e[2]}`),f(t,"class",Q="h-[22vh] min-w-[15vh] max-w-[15vh] hover:scale-125 duration-100 rounded-md shadow-lg shadow-black "+e[7]+" ring-4 ring-white"),f(t,"style",I="visibility: "+(e[3]?"hidden":"visible")+"; text-shadow: 0.05em 0.05em 0em black; background-image: radial-gradient(circle, var(--"+e[8].color+") 50%, hsl(var(--"+e[8].color+"-h), 50%, 50%));"+e[6])},m(E,D){P(E,t,D),h(t,n),h(n,r),h(n,o),h(n,i),h(i,s),h(s,u),h(n,d),h(d,c),h(c,m),h(n,b),h(b,v),h(v,B),C=!0,A||(T=X(t,"click",e[9]),A=!0)},p(E,[D]){e=E,(!C||D&256&&l!==(l="--var("+e[8].color+")"))&&f(r,"fill",l),(!C||D&256)&&a!==(a=e[8].display+"")&&G(u,a),(!C||D&256)&&g!==(g=e[8].display+"")&&G(m,g),(!C||D&256)&&_!==(_=e[8].display+"")&&G(B,_),(!C||D&5&&k!==(k=e[0]?e[0]:`${e[2]}`))&&f(t,"id",k),(!C||D&128&&Q!==(Q="h-[22vh] min-w-[15vh] max-w-[15vh] hover:scale-125 duration-100 rounded-md shadow-lg shadow-black "+e[7]+" ring-4 ring-white"))&&f(t,"class",Q),(!C||D&328&&I!==(I="visibility: "+(e[3]?"hidden":"visible")+"; text-shadow: 0.05em 0.05em 0em black; background-image: radial-gradient(circle, var(--"+e[8].color+") 50%, hsl(var(--"+e[8].color+"-h), 50%, 50%));"+e[6]))&&f(t,"style",I)},i(E){C||(p&&p.end(1),C=!0)},o(E){p=Tt(t,hn,{duration:e[5]?500:0}),C=!1},d(E){E&&j(t),E&&p&&p.end(),A=!1,T()}}}function An(e,t,n){let{id:r=void 0}=t,{index:l=0}=t,{card:o}=t,{isDropping:i=!1}=t,{handleDropCard:s=void 0}=t,{exitAnim:a=!0}=t,{style:u=""}=t,{class:d=""}=t,c={number:404,color:"nocolor",type:"number",display:""};const g=()=>{s&&s(l)};return e.$$set=m=>{"id"in m&&n(0,r=m.id),"index"in m&&n(1,l=m.index),"card"in m&&n(2,o=m.card),"isDropping"in m&&n(3,i=m.isDropping),"handleDropCard"in m&&n(4,s=m.handleDropCard),"exitAnim"in m&&n(5,a=m.exitAnim),"style"in m&&n(6,u=m.style),"class"in m&&n(7,d=m.class)},e.$$.update=()=>{e.$$.dirty&260&&(n(8,c.number=qe.parseNumber(o),c),n(8,c.type=qe.parseType(o),c),c.type=="number"?n(8,c.display=`${c.number}`,c):c.type=="plus2"?n(8,c.display="+2",c):c.type=="plus4"?n(8,c.display="+4",c):c.type=="reverse"&&n(8,c.display="rev",c),c.number==15||c.type!="plus4"?n(8,c.color=qe.parseColor(o),c):n(8,c.color="nocolor",c))},[r,l,o,i,s,a,u,d,c,g]}class Nt extends $e{constructor(t){super(),Ke(this,t,An,_n,He,{id:0,index:1,card:2,isDropping:3,handleDropCard:4,exitAnim:5,style:6,class:7})}}const qt="/stash/assets/CardFace-3b0bee72.png",bn="data:audio/wav;base64,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",vn={interactive:{ping:new Audio(bn)}};function ct(e,t,n){const r=e.slice();return r[20]=t[n],r[22]=n,r}function ut(e,t,n){const r=e.slice();return r[23]=t[n],r}function ft(e,t,n){const r=e.slice();return r[26]=t[n],r}function yn(e){let t;return{c(){t=w("p"),t.textContent="loading game"},m(n,r){P(n,t,r)},p:x,i:x,o:x,d(n){n&&j(t)}}}function wn(e){let t,n,r,l,o,i,s,a,u,d,c,g,m,b,v,_,B,k,Q,I,p,C,A,T,E,D,N,oe,U,je;function _e(y,F){return y[2].fullscreen?Bn:kn}let K=_e(e),J=K(e);function Pe(y,F){return y[1].filled?Cn:jn}let De=Pe(e),V=De(e);_=new Nt({props:{id:"dropcard",card:e[1].ref_card,class:"ring-gray-800 ring-4 rounded-md"}});let R=e[3].cred>=0&&dt(e),ie=e[1].oppstate,H=[];for(let y=0;y<ie.length;y+=1)H[y]=gt(ut(e,ie,y));const Ot=y=>q(H[y],1,1,()=>{H[y]=null}),tt=[Qn,En],te=[];function nt(y,F){return y[3].cards?0:1}return D=nt(e),N=te[D]=tt[D](e),{c(){t=w("div"),n=w("button"),n.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"></path></svg>
        share`,r=z(),l=w("button"),o=Y("svg"),i=Y("path"),s=L(`
        fast client`),u=z(),d=w("button"),J.c(),c=z(),g=w("div"),m=w("p"),V.c(),b=z(),v=w("div"),Ie(_.$$.fragment),B=z(),k=w("button"),Q=w("img"),p=z(),R&&R.c(),C=z(),A=w("div");for(let y=0;y<H.length;y+=1)H[y].c();T=z(),E=w("div"),N.c(),f(n,"class","p-0.5 rounded-md"),f(i,"fill-rule","evenodd"),f(i,"d","M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z"),f(i,"clip-rule","evenodd"),f(o,"xmlns","http://www.w3.org/2000/svg"),f(o,"viewBox","0 0 24 24"),f(o,"fill","currentColor"),f(o,"class","w-[1em] inline text-orange-600"),f(l,"class",a="p-1 "+(e[2].isFastClient?"text-orange-600 font-black":"")),f(m,"class","font-pop font-semibold p-1"),f(g,"class","col-span-3 text-center rounded-md"),f(t,"class","select-text grid grid-cols-3 gap-1 p-1 text-xs backdrop-brightness-75 rounded-md ring-0 ring-gray-500"),W(t,"text-shadow","1px 1px black"),Ue(Q.src,I=qt)||f(Q,"src",I),f(Q,"alt","card face"),f(k,"class","relative w-[15vh] h-[22vh] bg-gray-900 ring-gray-800 ring-4 rounded-md p-1"),f(k,"id","stash"),f(v,"class","w-full flex flex-row justify-evenly items-center"),f(A,"class","grid grid-cols-2 sm:grid-cols-1 justify-around items-center space-x-2 my-[2vh]"),f(E,"class","flex flex-row max-w-[100vw] h-[30vh] items-center -space-x-[2.5vh] overflow-x-scroll px-[10vw] no-scrollbar snap-x")},m(y,F){P(y,t,F),h(t,n),h(t,r),h(t,l),h(l,o),h(o,i),h(l,s),h(t,u),h(t,d),J.m(d,null),h(t,c),h(t,g),h(g,m),V.m(m,null),P(y,b,F),P(y,v,F),Be(_,v,null),h(v,B),h(v,k),h(k,Q),h(k,p),R&&R.m(k,null),P(y,C,F),P(y,A,F);for(let se=0;se<H.length;se+=1)H[se]&&H[se].m(A,null);P(y,T,F),P(y,E,F),te[D].m(E,null),oe=!0,U||(je=[X(n,"click",e[9]),X(l,"click",e[15]),X(d,"click",e[8]),X(k,"click",e[16])],U=!0)},p(y,F){(!oe||F&4&&a!==(a="p-1 "+(y[2].isFastClient?"text-orange-600 font-black":"")))&&f(l,"class",a),K!==(K=_e(y))&&(J.d(1),J=K(y),J&&(J.c(),J.m(d,null))),De===(De=Pe(y))&&V?V.p(y,F):(V.d(1),V=De(y),V&&(V.c(),V.m(m,null)));const se={};if(F&2&&(se.card=y[1].ref_card),_.$set(se),y[3].cred>=0?R?R.p(y,F):(R=dt(y),R.c(),R.m(k,null)):R&&(R.d(1),R=null),F&2){ie=y[1].oppstate;let O;for(O=0;O<ie.length;O+=1){const rt=ut(y,ie,O);H[O]?(H[O].p(rt,F),S(H[O],1)):(H[O]=gt(rt),H[O].c(),S(H[O],1),H[O].m(A,null))}for(re(),O=ie.length;O<H.length;O+=1)Ot(O);le()}let Se=D;D=nt(y),D===Se?te[D].p(y,F):(re(),q(te[Se],1,1,()=>{te[Se]=null}),le(),N=te[D],N?N.p(y,F):(N=te[D]=tt[D](y),N.c()),S(N,1),N.m(E,null))},i(y){if(!oe){S(_.$$.fragment,y);for(let F=0;F<ie.length;F+=1)S(H[F]);S(N),oe=!0}},o(y){q(_.$$.fragment,y),H=H.filter(Boolean);for(let F=0;F<H.length;F+=1)q(H[F]);q(N),oe=!1},d(y){y&&j(t),J.d(),V.d(),y&&j(b),y&&j(v),Ce(_),R&&R.d(),y&&j(C),y&&j(A),he(H,y),y&&j(T),y&&j(E),te[D].d(),U=!1,ee(je)}}}function kn(e){let t,n,r;return{c(){t=Y("svg"),n=Y("path"),r=L(`
          maximize`),f(n,"stroke-linecap","round"),f(n,"stroke-linejoin","round"),f(n,"d","M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke-width","1.5"),f(t,"stroke","currentColor"),f(t,"class","w-[1em] inline")},m(l,o){P(l,t,o),h(t,n),P(l,r,o)},d(l){l&&j(t),l&&j(r)}}}function Bn(e){let t,n,r;return{c(){t=Y("svg"),n=Y("path"),r=L(`
          minimize`),f(n,"stroke-linecap","round"),f(n,"stroke-linejoin","round"),f(n,"d","M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke-width","1.5"),f(t,"stroke","currentColor"),f(t,"class","w-[1em] inline")},m(l,o){P(l,t,o),h(t,n),P(l,r,o)},d(l){l&&j(t),l&&j(r)}}}function Cn(e){let t=e[1].current==e[0]?"your turn to make a move!":`${e[1].current} is making a move`,n;return{c(){n=L(t)},m(r,l){P(r,n,l)},p(r,l){l&3&&t!==(t=r[1].current==r[0]?"your turn to make a move!":`${r[1].current} is making a move`)&&G(n,t)},d(r){r&&j(n)}}}function jn(e){let t;return{c(){t=L("waiting for players to join")},m(n,r){P(n,t,r)},p:x,d(n){n&&j(t)}}}function dt(e){let t,n=e[1].config.cred_count-e[3].cred==0?"no pulls left":`${e[1].config.cred_count-e[3].cred} pullable!`,r;return{c(){t=w("p"),r=L(n),f(t,"class","absolute bottom-2 text-center bg-gray-800 rounded-md p-[1px]")},m(l,o){P(l,t,o),h(t,r)},p(l,o){o&10&&n!==(n=l[1].config.cred_count-l[3].cred==0?"no pulls left":`${l[1].config.cred_count-l[3].cred} pullable!`)&&G(r,n)},d(l){l&&j(t)}}}function Pn(e){let t,n,r=e[23].username+"",l,o;return{c(){t=w("p"),n=w("b"),l=L(r),o=L(" is in!")},m(i,s){P(i,t,s),h(t,n),h(n,l),h(t,o)},p(i,s){s&2&&r!==(r=i[23].username+"")&&G(l,r)},i:x,o:x,d(i){i&&j(t)}}}function Dn(e){let t,n=e[23].username+"",r,l,o=e[23].nocards+"",i,s,a,u,d,c,g=[...Array(Math.min(e[23].nocards,10)).keys()],m=[];for(let _=0;_<g.length;_+=1)m[_]=mt(ft(e,g,_));const b=_=>q(m[_],1,1,()=>{m[_]=null});let v=e[23].nocards>10&&pt(e);return{c(){t=w("p"),r=L(n),l=L("("),i=L(o),s=L(")"),a=z(),u=w("div");for(let _=0;_<m.length;_+=1)m[_].c();d=z(),v&&v.c(),f(u,"class","flex flex-row justify-center items-center -space-x-[1vh] duration-1000")},m(_,B){P(_,t,B),h(t,r),h(t,l),h(t,i),h(t,s),P(_,a,B),P(_,u,B);for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(u,null);h(u,d),v&&v.m(u,null),c=!0},p(_,B){if((!c||B&2)&&n!==(n=_[23].username+"")&&G(r,n),(!c||B&2)&&o!==(o=_[23].nocards+"")&&G(i,o),B&2){g=[...Array(Math.min(_[23].nocards,10)).keys()];let k;for(k=0;k<g.length;k+=1){const Q=ft(_,g,k);m[k]?(m[k].p(Q,B),S(m[k],1)):(m[k]=mt(Q),m[k].c(),S(m[k],1),m[k].m(u,d))}for(re(),k=g.length;k<m.length;k+=1)b(k);le()}_[23].nocards>10?v?v.p(_,B):(v=pt(_),v.c(),v.m(u,null)):v&&(v.d(1),v=null)},i(_){if(!c){for(let B=0;B<g.length;B+=1)S(m[B]);c=!0}},o(_){m=m.filter(Boolean);for(let B=0;B<m.length;B+=1)q(m[B]);c=!1},d(_){_&&j(t),_&&j(a),_&&j(u),he(m,_),v&&v.d()}}}function mt(e){let t,n,r,l,o,i,s;return{c(){t=w("div"),n=w("img"),Ue(n.src,r=qt)||f(n,"src",r),f(n,"alt","card face"),f(t,"class",l="w-[5vh] h-[7vh] bg-gray-900 duration-1000 "+(e[1].current==e[23].username?"ring-cyan-400":"ring-gray-800")+" ring-2 rounded-md p-1")},m(a,u){P(a,t,u),h(t,n),s=!0},p(a,u){(!s||u&2&&l!==(l="w-[5vh] h-[7vh] bg-gray-900 duration-1000 "+(a[1].current==a[23].username?"ring-cyan-400":"ring-gray-800")+" ring-2 rounded-md p-1"))&&f(t,"class",l)},i(a){s||(me(()=>{s&&(i&&i.end(1),o=cn(t,at,{amount:25,duration:2*1e3}),o.start())}),s=!0)},o(a){o&&o.invalidate(),i=Tt(t,at,{amount:25,duration:2*1e3}),s=!1},d(a){a&&j(t),a&&i&&i.end()}}}function pt(e){let t,n=e[23].nocards-10+"",r,l;return{c(){t=L("(+"),r=L(n),l=L(")")},m(o,i){P(o,t,i),P(o,r,i),P(o,l,i)},p(o,i){i&2&&n!==(n=o[23].nocards-10+"")&&G(r,n)},d(o){o&&j(t),o&&j(r),o&&j(l)}}}function gt(e){let t,n,r,l,o,i;const s=[Dn,Pn],a=[];function u(d,c){return d[23].nocards>0?0:1}return n=u(e),r=a[n]=s[n](e),{c(){t=w("div"),r.c(),l=z(),f(t,"class",o="flex flex-col justify-center items-center text-xs "+(e[23].username==e[1].current?"animate-pulse":""))},m(d,c){P(d,t,c),a[n].m(t,null),h(t,l),i=!0},p(d,c){let g=n;n=u(d),n===g?a[n].p(d,c):(re(),q(a[g],1,1,()=>{a[g]=null}),le(),r=a[n],r?r.p(d,c):(r=a[n]=s[n](d),r.c()),S(r,1),r.m(t,l)),(!i||c&2&&o!==(o="flex flex-col justify-center items-center text-xs "+(d[23].username==d[1].current?"animate-pulse":"")))&&f(t,"class",o)},i(d){i||(S(r),i=!0)},o(d){q(r),i=!1},d(d){d&&j(t),a[n].d()}}}function En(e){let t;return{c(){t=w("p"),t.textContent="you have no cards left to play"},m(n,r){P(n,t,r)},p:x,i:x,o:x,d(n){n&&j(t)}}}function Qn(e){let t,n,r=e[3].cards,l=[];for(let i=0;i<r.length;i+=1)l[i]=ht(ct(e,r,i));const o=i=>q(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=Mt()},m(i,s){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(i,s);P(i,t,s),n=!0},p(i,s){if(s&2056){r=i[3].cards;let a;for(a=0;a<r.length;a+=1){const u=ct(i,r,a);l[a]?(l[a].p(u,s),S(l[a],1)):(l[a]=ht(u),l[a].c(),S(l[a],1),l[a].m(t.parentNode,t))}for(re(),a=r.length;a<l.length;a+=1)o(a);le()}},i(i){if(!n){for(let s=0;s<r.length;s+=1)S(l[s]);n=!0}},o(i){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)q(l[s]);n=!1},d(i){he(l,i),i&&j(t)}}}function ht(e){let t,n;return t=new Nt({props:{id:e[20]+"-"+e[22],index:e[22],card:e[20],handleDropCard:e[11],class:"transition-all",style:"transform: rotate("+(e[22]/e[3].cards.length-.5)*45+"deg)"}}),{c(){Ie(t.$$.fragment)},m(r,l){Be(t,r,l),n=!0},p(r,l){const o={};l&8&&(o.id=r[20]+"-"+r[22]),l&8&&(o.card=r[20]),l&8&&(o.style="transform: rotate("+(r[22]/r[3].cards.length-.5)*45+"deg)"),t.$set(o)},i(r){n||(S(t.$$.fragment,r),n=!0)},o(r){q(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function Mn(e){let t,n,r,l,o;const i=[wn,yn],s=[];function a(u,d){return u[4].ready?0:1}return n=a(e),r=s[n]=i[n](e),{c(){t=w("div"),r.c(),f(t,"id","playground"),f(t,"class",l="relative "+(e[1].current==e[0]?"":"bg-gray-950")+" h-[95vh] py-[5vh] flex flex-col justify-center items-center space-y-5 select-none transition-colors duration-1000")},m(u,d){P(u,t,d),s[n].m(t,null),o=!0},p(u,[d]){let c=n;n=a(u),n===c?s[n].p(u,d):(re(),q(s[c],1,1,()=>{s[c]=null}),le(),r=s[n],r?r.p(u,d):(r=s[n]=i[n](u),r.c()),S(r,1),r.m(t,null)),(!o||d&3&&l!==(l="relative "+(u[1].current==u[0]?"":"bg-gray-950")+" h-[95vh] py-[5vh] flex flex-col justify-center items-center space-y-5 select-none transition-colors duration-1000"))&&f(t,"class",l)},i(u){o||(S(r),o=!0)},o(u){q(r),o=!1},d(u){u&&j(t),s[n].d()}}}class Fn{constructor(t,n){Ae(this,"state");Ae(this,"machine");this.state=t,this.machine=n}}class Ln extends Fn{constructor(n,r,l){super(r,l);Ae(this,"game_id");Ae(this,"username");this.game_id=n}load(n){this.state.update(r=>(r=n,r))}initialize(n){this.username=n,this.machine.update(r=>(r.ready=!1,r)),$.state(this.game_id,3,this.username).then(r=>{this.load(r),this.machine.update(l=>(l.ready=!0,l)),console.debug("initialized state",Xt(this.state))}).catch(r=>{M(`error during initialization,  ${r.message}`)})}}function zn(e,t,n){let r,l,o,{game_id:i="3370.6-dumbell"}=t,{username:s="dumbell"}=t,{handleColorSelect:a}=t,{progress:u}=t,d={isFastClient:!1,fullscreen:!1},c=pe({ready:!1});ye(e,c,A=>n(4,o=A));let g=pe({});ye(e,g,A=>n(1,r=A));let m=pn(g,A=>({cards:A.cards,debt:A.debt,cred:A.cred}));ye(e,m,A=>n(3,l=A));const b=async()=>{try{let A=await $.state(i,1,s);Z(g,r={...r,...A},r),console.debug("dept-1 state update"),console.log(l)}catch(A){M(`state update failed (${A.message})(dept-1)`)}},v=async()=>{try{let A=await $.state(i,2,s);if(Z(g,r={...r,...A},r),console.debug("dept-2 state update"),console.log(l),l.debt>0){M(`pulling ${l.debt} cards from stash`);try{let T=await $.action(i,s,2);Z(g,r={...r,...T},r)}catch{M("failed to neutralize debt")}}}catch(A){M(`state update failed (${A.message})(dept-2)`)}};let _;Lt(()=>{_=new Ln(i,g,c),_.initialize(s);const A=async()=>{if(o.ready&&r.current!==s){if(u.zero(),u.set(25),r.filled)v();else try{let T=await $.state(i,0,s);Z(g,r={...r,...T},r),console.debug("dept-0 state update")}catch(T){M(`state update failed (${T.message})(dept-0)`)}u.complete()}setTimeout(A,(d.isFastClient?3:5)*1e3)};A()});const B=()=>{d.fullscreen?document.exitFullscreen?(document.exitFullscreen(),n(2,d.fullscreen=!1,d)):M("couldn't minimize",2):document.body.requestFullscreen?(document.body.requestFullscreen(),n(2,d.fullscreen=!0,d)):M("couldn't maximize",2)},k=()=>{navigator.clipboard?navigator.clipboard.writeText(`https://reold.github.io/#${i}`).then(()=>{M("game url copied to clipboard")}):M(`send <b>${i}</b> to your friend`,10)},Q=()=>{$.action(i,s,1).then(A=>{Z(g,r.cards=A,r),b()}).catch(A=>{M(A.message,1)})},I=async A=>{if(r.filled){if(r.current!=s){M("it's not your turn!",1);return}}else{M("wait for players to join",1);return}let T=l.cards[A];const E=`${T}-${A}`;if((T&11e6)>>6==2)try{const D=await a();T+=D<<4,T+=15}catch{return}$.action(i,s,0,T).then(()=>{const D=document.getElementById("dropcard");let N=document.getElementById(E);const oe=document.getElementById("playground");let U=N.cloneNode(!0);U.id=`${U.id}-fake`,U.style.position="absolute";const je=N.parentElement,_e=St([N.offsetLeft-je.scrollLeft,N.offsetTop,parseFloat(N.style.transform.split("(")[1].split("d")[0])],{duration:1500,easing:et});_e.subscribe(([K,J,Pe])=>{U.style.left=`${K}px`,U.style.top=`${J}px`,U.style.transform=`rotate(${Math.round(Pe)}deg)`}),oe.appendChild(U),g.update(K=>(K.cards.splice(A,1),K)),_e.set([D.offsetLeft,D.offsetTop,0]).then(async()=>{U.remove(),Z(g,r.ref_card=T,r),await b()})}).catch(D=>{M(`error, ${D.message}`)})},p=()=>{n(2,d.isFastClient=!d.isFastClient,d)},C=()=>{M("pulling card from stash",1),Q()};return e.$$set=A=>{"game_id"in A&&n(12,i=A.game_id),"username"in A&&n(0,s=A.username),"handleColorSelect"in A&&n(13,a=A.handleColorSelect),"progress"in A&&n(14,u=A.progress)},e.$$.update=()=>{e.$$.dirty&3&&r.current==s&&vn.interactive.ping.play()},[s,r,d,l,o,c,g,m,B,k,Q,I,i,a,u,p,C]}class xn extends $e{constructor(t){super(),Ke(this,t,zn,Mn,He,{game_id:12,username:0,handleColorSelect:13,progress:14})}}const In="/stash/assets/StashLogo-2267d513.png";function _t(e,t,n){const r=e.slice();return r[18]=t[n],r}function At(e,t,n){const r=e.slice();return r[21]=t[n],r[22]=t,r[23]=n,r}function bt(e,t,n){const r=e.slice();return r[24]=t[n],r}function vt(e){let t,n,r=e[0].promise&&!e[0].form.find(jt),l,o,i,s,a=e[0].form,u=[];for(let c=0;c<a.length;c+=1)u[c]=wt(At(e,a,c));let d=r&&kt(e);return{c(){for(let c=0;c<u.length;c+=1)u[c].c();t=z(),n=w("div"),d&&d.c(),l=z(),o=w("button"),o.textContent="close",f(o,"class","bg-gray-500 p-2 rounded-sm mt-2"),f(n,"class","flex flex-row justify-center items-center space-x-2")},m(c,g){for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(c,g);P(c,t,g),P(c,n,g),d&&d.m(n,null),h(n,l),h(n,o),i||(s=X(o,"click",e[5]),i=!0)},p(c,g){if(g&1){a=c[0].form;let m;for(m=0;m<a.length;m+=1){const b=At(c,a,m);u[m]?u[m].p(b,g):(u[m]=wt(b),u[m].c(),u[m].m(t.parentNode,t))}for(;m<u.length;m+=1)u[m].d(1);u.length=a.length}g&1&&(r=c[0].promise&&!c[0].form.find(jt)),r?d?d.p(c,g):(d=kt(c),d.c(),d.m(n,l)):d&&(d.d(1),d=null)},d(c){he(u,c),c&&j(t),c&&j(n),d&&d.d(),i=!1,s()}}}function Tn(e){let t,n,r,l,o;function i(){e[12].call(t,e[22],e[23])}return{c(){t=w("input"),f(t,"type","text"),f(t,"placeholder",n=`${e[21].name} goes here`),f(t,"name",r=e[21].name),f(t,"autocapitalize","none"),f(t,"autocorrect","off"),f(t,"autocomplete","off"),f(t,"class","w-full p-2 outline-none bg-gray-800 ring-1 ring-gray-500 rounded-sm")},m(s,a){P(s,t,a),Fe(t,e[21].value),l||(o=X(t,"input",i),l=!0)},p(s,a){e=s,a&1&&n!==(n=`${e[21].name} goes here`)&&f(t,"placeholder",n),a&1&&r!==(r=e[21].name)&&f(t,"name",r),a&1&&t.value!==e[21].value&&Fe(t,e[21].value)},d(s){s&&j(t),l=!1,o()}}}function Hn(e){let t,n=e[21].name+"",r,l,o,i=e[21].options,s=[];for(let a=0;a<i.length;a+=1)s[a]=yt(bt(e,i,a));return{c(){t=w("p"),r=L(n),l=z(),o=w("div");for(let a=0;a<s.length;a+=1)s[a].c();f(o,"class","grid grid-cols-2 gap-2")},m(a,u){P(a,t,u),h(t,r),P(a,l,u),P(a,o,u);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(o,null)},p(a,u){if(u&1&&n!==(n=a[21].name+"")&&G(r,n),u&1){i=a[21].options;let d;for(d=0;d<i.length;d+=1){const c=bt(a,i,d);s[d]?s[d].p(c,u):(s[d]=yt(c),s[d].c(),s[d].m(o,null))}for(;d<s.length;d+=1)s[d].d(1);s.length=i.length}},d(a){a&&j(t),a&&j(l),a&&j(o),he(s,a)}}}function Sn(e){let t,n=e[21].name+"",r;return{c(){t=w("b"),r=L(n)},m(l,o){P(l,t,o),h(t,r)},p(l,o){o&1&&n!==(n=l[21].name+"")&&G(r,n)},d(l){l&&j(t)}}}function Nn(e){let t,n,r=e[21].name+"",l,o,i,s=e[21].value+"",a,u=e[21].value==e[21].max?" max":"",d,c,g,m,b,v,_,B,k;function Q(){e[10].call(m,e[22],e[23])}return{c(){t=w("div"),n=w("p"),l=L(r),o=z(),i=w("span"),a=L(s),d=L(u),g=z(),m=w("input"),f(i,"class",c="px-0.5 h-min "+(e[21].value==e[21].max?"bg-orange-600":"bg-blue-600")+" rounded-md font-black transition-colors duration-1000"),f(m,"type","range"),f(m,"name",b=e[21].name),f(m,"min",v=e[21].min),f(m,"max",_=e[21].max),f(m,"class","col-span-2 p-1"),f(t,"class","rounded-md p-1 bg-gray-800 w-full grid grid-cols-3 items-center space-x-2")},m(I,p){P(I,t,p),h(t,n),h(n,l),h(n,o),h(n,i),h(i,a),h(i,d),h(t,g),h(t,m),Fe(m,e[21].value),B||(k=[X(m,"change",Q),X(m,"input",Q)],B=!0)},p(I,p){e=I,p&1&&r!==(r=e[21].name+"")&&G(l,r),p&1&&s!==(s=e[21].value+"")&&G(a,s),p&1&&u!==(u=e[21].value==e[21].max?" max":"")&&G(d,u),p&1&&c!==(c="px-0.5 h-min "+(e[21].value==e[21].max?"bg-orange-600":"bg-blue-600")+" rounded-md font-black transition-colors duration-1000")&&f(i,"class",c),p&1&&b!==(b=e[21].name)&&f(m,"name",b),p&1&&v!==(v=e[21].min)&&f(m,"min",v),p&1&&_!==(_=e[21].max)&&f(m,"max",_),p&1&&Fe(m,e[21].value)},d(I){I&&j(t),B=!1,ee(k)}}}function yt(e){let t,n=e[24].name+"",r,l,o;function i(){return e[11](e[24])}return{c(){t=w("button"),r=L(n),W(t,"background-color","var(--"+e[24].color+")"),f(t,"class","aspect-square align-middle p-5 hover:scale-125 duration-75 rounded-sm w-[15ch]")},m(s,a){P(s,t,a),h(t,r),l||(o=X(t,"click",i),l=!0)},p(s,a){e=s,a&1&&n!==(n=e[24].name+"")&&G(r,n),a&1&&W(t,"background-color","var(--"+e[24].color+")")},d(s){s&&j(t),l=!1,o()}}}function wt(e){let t;function n(o,i){return o[21].type=="range"?Nn:o[21].type=="text"?Sn:o[21].type=="colorselect"?Hn:Tn}let r=n(e),l=r(e);return{c(){l.c(),t=Mt()},m(o,i){l.m(o,i),P(o,t,i)},p(o,i){r===(r=n(o))&&l?l.p(o,i):(l.d(1),l=r(o),l&&(l.c(),l.m(t.parentNode,t)))},d(o){l.d(o),o&&j(t)}}}function kt(e){let t,n,r;return{c(){t=w("button"),t.textContent="continue",f(t,"class","bg-green-600 p-2 rounded-sm mt-2")},m(l,o){P(l,t,o),n||(r=X(t,"click",function(){ge(e[0].promise.resolve)&&e[0].promise.resolve.apply(this,arguments)}),n=!0)},p(l,o){e=l},d(l){l&&j(t),n=!1,r()}}}function qn(e){let t,n,r;const l=[e[2].props];var o=Ct[e[2].name];function i(s){let a={};for(let u=0;u<l.length;u+=1)a=Oe(a,l[u]);return{props:a}}return o&&(n=ot(o,i())),{c(){t=w("div"),n&&Ie(n.$$.fragment),f(t,"class","w-full h-[95vh]")},m(s,a){P(s,t,a),n&&Be(n,t,null),r=!0},p(s,a){const u=a&4?un(l,[fn(s[2].props)]):{};if(a&4&&o!==(o=Ct[s[2].name])){if(n){re();const d=n;q(d.$$.fragment,1,0,()=>{Ce(d,1)}),le()}o?(n=ot(o,i()),Ie(n.$$.fragment),S(n.$$.fragment,1),Be(n,t,null)):n=null}else o&&n.$set(u)},i(s){r||(n&&S(n.$$.fragment,s),r=!0)},o(s){n&&q(n.$$.fragment,s),r=!1},d(s){s&&j(t),n&&Ce(n)}}}function On(e){let t,n,r,l,o,i,s,a,u=[{name:"create",color:"bg-green-600",handle:e[6]},{name:"join",color:"bg-blue-700",handle:e[7]},{name:"help",handle:e[8]}],d=[];for(let c=0;c<3;c+=1)d[c]=Bt(_t(e,u,c));return{c(){t=w("div"),n=w("div"),r=w("img"),o=z(),i=w("p"),i.textContent="Where Strategy Meets the Shuffle - Play Your Cards Wisely!",s=z(),a=w("div");for(let c=0;c<3;c+=1)d[c].c();Ue(r.src,l=In)||f(r,"src",l),f(r,"alt","stash logo"),f(r,"class","w-[50vh] sm:h-[50vh]"),f(i,"class","text-white"),W(i,"text-shadow","0px 3px 3px rgba(15, 23, 42)"),f(n,"class","flex flex-col justify-center items-center -space-y-20"),f(a,"class","flex flex-row justify-center items-center space-x-5"),f(t,"class","w-full h-[95vh] p-2 flex flex-col justify-center items-center space-y-10 text-center")},m(c,g){P(c,t,g),h(t,n),h(n,r),h(n,o),h(n,i),h(t,s),h(t,a);for(let m=0;m<3;m+=1)d[m]&&d[m].m(a,null)},p(c,g){if(g&448){u=[{name:"create",color:"bg-green-600",handle:c[6]},{name:"join",color:"bg-blue-700",handle:c[7]},{name:"help",handle:c[8]}];let m;for(m=0;m<3;m+=1){const b=_t(c,u,m);d[m]?d[m].p(b,g):(d[m]=Bt(b),d[m].c(),d[m].m(a,null))}for(;m<3;m+=1)d[m].d(1)}},i:x,o:x,d(c){c&&j(t),he(d,c)}}}function Bt(e){let t,n=e[18].name+"",r,l,o;function i(){return e[13](e[18])}return{c(){t=w("button"),r=L(n),f(t,"class",(e[18].color?e[18].color:"bg-gray-950")+" p-2 text-lg rounded-xl hover:scale-125 duration-150 delay-75")},m(s,a){P(s,t,a),h(t,r),l||(o=X(t,"click",i),l=!0)},p(s,a){e=s},d(s){s&&j(t),l=!1,o()}}}function Yn(e){let t,n,r,l,o,i,s,a,u,d,c,g,m,b,v,_,B,k,Q,I,p=e[0].form&&vt(e);const C=[On,qn],A=[];function T(E,D){return E[2].name=="home"?0:1}return c=T(e),g=A[c]=C[c](e),{c(){t=w("div"),n=w("div"),r=z(),l=w("div"),o=z(),i=w("button"),s=w("div"),a=w("b"),a.textContent="Complete to continue",u=z(),p&&p.c(),d=z(),g.c(),m=z(),b=w("div"),v=w("p"),v.innerHTML=`<span class="font-sans">Stash</span>, crafted by reold.
      <a href="https://x.com/redicrafty" target="_blank" class="text-cyan-600">Report an error<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1em] inline"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>`,_=z(),B=w("span"),B.textContent="prod",f(n,"class","absolute w-full min-h-[5vh] pt-[2vh] flex flex-col-reverse justify-center items-center z-30"),f(l,"class","z-20 fixed top-0 left-0 h-[2px] bg-cyan-600"),W(l,"width",e[3]+"vw"),f(a,"class","mb-1 text-lg"),f(s,"class","bg-gray-900 ring-1 text-sm rounded-sm ring-gray-500 flex flex-col justify-center items-center space-y-2 p-2 cursor-text text-md max-w-[50vh] max-sm:max-w-[85vw]"),W(i,"visibility",e[0].open?"visible":"hidden"),f(i,"class","absolute w-full h-screen p-1 flex flex-col justify-center items-center backdrop-blur-md z-10"),f(v,"class","font-pop font-bold"),f(B,"class","bg-cyan-600 text-black p-[0.2em] rounded-sm"),f(b,"class","w-full h-[5vh] flex flex-row justify-center items-center space-x-1 bg-gray-950 text-white text-center text-xs"),f(t,"class","w-full h-[100vh] relative overflow-hidden")},m(E,D){P(E,t,D),h(t,n),e[9](n),h(t,r),h(t,l),h(t,o),h(t,i),h(i,s),h(s,a),h(s,u),p&&p.m(s,null),h(t,d),A[c].m(t,null),h(t,m),h(t,b),h(b,v),h(b,_),h(b,B),k=!0,Q||(I=X(i,"click",Vt(e[5])),Q=!0)},p(E,[D]){(!k||D&8)&&W(l,"width",E[3]+"vw"),E[0].form?p?p.p(E,D):(p=vt(E),p.c(),p.m(s,null)):p&&(p.d(1),p=null),(!k||D&1)&&W(i,"visibility",E[0].open?"visible":"hidden");let N=c;c=T(E),c===N?A[c].p(E,D):(re(),q(A[N],1,1,()=>{A[N]=null}),le(),g=A[c],g?g.p(E,D):(g=A[c]=C[c](E),g.c()),S(g,1),g.m(t,m))},i(E){k||(S(g),k=!0)},o(E){q(g),k=!1},d(E){E&&j(t),e[9](null),p&&p.d(),A[c].d(),Q=!1,I()}}}const Ct={game:xn},M=(e,t=5)=>{Ht.update(n=>(n=[...n,{msg:e,dur:t*1e3}],n))},jt=e=>["colorselect"].includes(e.type);function Gn(e,t,n){let r,l;ye(e,ve,p=>n(2,r=p)),Lt(()=>{const p=window.location.hash.slice(1);p!=""&&(g(),o.form.forEach(C=>(C.name=="game id"&&(C.value=p),C)),M(`enter <b>username</b> and continue to join <b>${p}</b>`,10))});let o={open:!1,promise:void 0,form:[]},i;const s=St(0,{duration:100,easing:et});ye(e,s,p=>n(3,l=p));const a={zero:()=>{s.set(0,{duration:0})},complete:()=>{s.set(100,{duration:100}).then(a.zero)},set:p=>s.set(Math.min(Math.max(p,0),100))};Ht.subscribe(p=>{if(p.length==0)return p;const C=p[0],A=document.createElement("p");return A.className="animate-pulse opacity-75 min-w-[10vw] max-w-[80vw] bg-gray-950 font-pop text-semibold text-white ring-2 ring-gray-900 mb-2 p-1 text-center rounded-md text-sm",A.innerHTML=C.msg,i.append(A),p.splice(0,1),setTimeout(()=>{A.remove()},C.dur),p});const u=()=>{n(0,o.open=!1,o),o.promise&&o.promise.reject(),n(0,o.promise=void 0,o)},d=()=>(n(0,o.form=[{name:"select color",type:"colorselect",options:[{name:"red",color:"red",value:0},{name:"green",color:"green",value:1},{name:"blue",color:"blue",value:2},{name:"yellow",color:"yellow",value:3}]}],o),n(0,o.open=!0,o),new Promise((p,C)=>{n(0,o.promise={resolve:A=>{p(A),u()},reject:C},o)})),c=()=>{M("enter your <b>username</b> and <b>game configuration</b>"),n(0,o.form=[{name:"username",value:""},{name:"configuration",type:"text"},{name:"max players",value:2,type:"range",min:2,max:4},{name:"card count",value:5,type:"range",min:2,max:15}],o),n(0,o.open=!0,o),n(0,o.promise={resolve:()=>{b()},reject:()=>{}},o)},g=()=>{M("enter your <b>username</b> and <b>game id<b/>"),n(0,o.form=[{name:"username",value:""},{name:"game id",value:""}],o),n(0,o.open=!0,o),n(0,o.promise={resolve:()=>{v()},reject:()=>{}},o)},m=()=>{M("contact <b>@redicrafty on X</b> or <b>@0digt on Instagram</b>"),d().then(p=>M(`you chose <b>${p}</b> color`)).catch(()=>{})},b=async()=>{a.set(25);let p={};if(o.form.forEach(C=>{p[C.name]=C.value}),n(0,o.open=!1,o),p.username&&p["max players"]){M(`creating a <b>${p["max players"]} player game</b>`);try{const C=await $.create(p.username,{max_players:p["max players"],card_count:p["card count"]});console.log("game created with state",C),M("<b>successfully created game!</b>"),Z(ve,r.props={game_id:C.key,username:p.username,handleColorSelect:d,progress:a},r),Z(ve,r.name="game",r)}catch(C){M(`unable to create game (${C.message})`)}}else M("invalid information");a.complete()},v=()=>{let p={};o.form.forEach(C=>{p[C.name]=C.value}),n(0,o.open=!1,o),p.username&&p["game id"]?(M(`trying to join ${p["game id"]} as ${p.username} `,2),$.join(p.username,p["game id"]).then(()=>{M("successfully joined game",2),Z(ve,r.props={game_id:p["game id"],username:p.username,handleColorSelect:d,progress:a},r),Z(ve,r.name="game",r)}).catch(C=>{M(`unable to join game (${C.message})`)})):M("invalid information")};function _(p){Ge[p?"unshift":"push"](()=>{i=p,n(1,i)})}function B(p,C){p[C].value=Zt(this.value),n(0,o)}const k=p=>o.promise.resolve(p.value);function Q(p,C){p[C].value=this.value,n(0,o)}return[o,i,r,l,s,u,c,g,m,_,B,k,Q,p=>{p.handle&&p.handle()}]}class Rn extends $e{constructor(t){super(),Ke(this,t,Gn,Yn,He,{})}}new Rn({target:document.getElementById("app")});
